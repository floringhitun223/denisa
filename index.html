<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playlistul tau</title>
     <link rel='icon' type='image/png' href='/assets/logo.png'>
    <link rel='stylesheet' href='css/style.css'>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <script src='js/script.js' defer></script>
    
</head>
<body>
    <div class="music-list">
        <div class="playlist-back">
            <img src="assets/back.jpg" alt="">
        </div>
        <div class="playlist-content">
            <div class="song" onclick="showPlayer(1);" id="song1">
                <div class="song-image">
                    <img src="assets/song1.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle1"> Te iubesc</span>
                    <span class="song-subtitle"> De la Florin</span>
                   
                </div>
            </div>
            <div class="song" onclick="showPlayer(2);" id="song2">
                <div class="song-image">
                    <img src="assets/song2.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle2"> Gâza mea</span>
                    <span class="song-subtitle"> De la Florin</span>
                    
                </div>
            </div>
            <div class="song" onclick="showPlayer(3);" id="song3">
                <div class="song-image">
                    <img src="assets/song3.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle3"> Denisa mea</span>
                    <span class="song-subtitle"> De la Florin</span>
                  
                </div>
            </div>
            <div class="song" onclick="showPlayer(4);" id="song4">
                <div class="song-image">
                    <img src="assets/song4.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle4"> Denisa din Damideni</span>
                    <span class="song-subtitle"> De la Florin</span>
                   
                </div>
            </div>
            <div class="song" onclick="showPlayer(5);" id="song5">
                <div class="song-image">
                    <img src="assets/song5.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle5"> Ne potrivim</span>
                    <span class="song-subtitle"> Noi</span>
                   
                </div>
            </div>
            <div class="song" onclick="showPlayer(6);" id="song6">
                <div class="song-image">
                    <img src="assets/song6.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle6"> Bucuria mea</span>
                    <span class="song-subtitle"> De la Florin</span>
                    
                </div>
            </div>
            <div class="song" onclick="showPlayer(7);" id="song7">
                <div class="song-image">
                    <img src="assets/song7.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle7"> My love, my heart</span>
                    <span class="song-subtitle"> De la Florin</span>
                    
                       
                </div>
            </div>
            <div class="song" onclick="showPlayer(8);" id="song8">
                <div class="song-image">
                    <img src="assets/song8.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle8"> Doar pentru tine</span>
                    <span class="song-subtitle"> De la Florin</span>
                    
                </div>
            </div>
            <div class="song" onclick="showPlayer(9);" id="song9">
                <div class="song-image">
                    <img src="assets/song9.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle9"> Denisa&Florin</span>
                    <span class="song-subtitle"> Noi</span>
                    
                </div>
            </div>
            <div class="song" onclick="showPlayer(10);" id="song10">
                <div class="song-image">
                    <img src="assets/song10.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle10"> I think about YOU</span>
                    <span class="song-subtitle"> Noi</span>
                    
                </div>
            </div>
            <div class="song" onclick="showPlayer(11);" id="song11">
                <div class="song-image">
                    <img src="assets/song11.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle11">Ne-am îndrăgostit</span>
                    <span class="song-subtitle"> Noi</span>
                    
                </div>
            </div>
            <div class="song" onclick="showPlayer(12);" id="song12">
                <div class="song-image">
                    <img src="assets/song12.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle12">Cum ne-am cunoscut</span>
                    <span class="song-subtitle"> Noi</span>
                    
                </div>
            </div>
            <div class="song" onclick="showPlayer(13);" id="song13">
                <div class="song-image">
                    <img src="assets/song13.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle13">Mă faci să urlu</span>
                    <span class="song-subtitle">De la Florin</span>
                    
                </div>
            </div>
            <div class="song" onclick="showPlayer(14);" id="song14">
                <div class="song-image">
                    <img src="assets/song14.jpg" alt="">
                </div>
                <div class="song-details">
                    <span class="song-title" id="songtitle14">Bebelușa</span>
                    <span class="song-subtitle"> De la Florin</span>
                    
                </div>
            </div>
        </div>
        <button class="play" onclick="showPlayer(1);">
            <img src="assets/play.png" alt="">
        </button>
        <button class="shuffle" onclick="showPlayer(Math.floor(Math.random() * 14) + 1);">
            <img src="assets/shuffle.png" alt="">
        </button>
        <h1>Playlist-ul Denisei</h1>
        <h6>14 melodii</h6>

        <div class="player-mini">
            <div class="player-play">
                <div class="play-image" onclick="downloadCurrentAudio();">
                <img src="assets/exampleimg.jpg" alt="" >
                    <div class="time">
                        12:32
                    </div>
                </div>
                <div class="play-details">
                <span class="play-title"> Untitled song</span>
                <span class="play-subtitle"> Artist</span>
                </div>
                <button class="seekb" onclick="substractTenSeconds();">
                    <img src="assets/seekb.png" alt="">
                </button>
                <button class="seekf" onclick="addTenSeconds();">
                    <img src="assets/seekf.png" alt="">
                </button>
                <button class="pause" onclick="togglePlayPause();">
                    <img src="assets/pause.png" alt="">
                </button>
            </div>
            <div class="play-time">
                <div class="progress-back">
                    <div class="progress"></div>
                </div>
            </div>
        </div>
    </div>
<script>
let songPlay = 0;
let audioPlayer = null;
let isPlaying = false;

  // Add event listeners to all .song divs
  //document.querySelectorAll('.song').forEach(songDiv => {
    //songDiv.addEventListener('click', getImageSource);
  //});
  function showPlayer(songId) {
    const player = document.querySelector('.player-mini');
    const songName = document.querySelector('.play-title');
    const songtitle = document.getElementById(`songtitle${songId}`);
    const songtitleAll = document.querySelectorAll('.song-title'); // Select all song titles
    const songArtist = document.querySelector('.play-subtitle');
    const songImage = document.querySelector('.play-image img');
    
    songtitleAll.forEach(title => {
      title.style.color = '#ffffff'; // Reset all titles to white color (default)
  });
  

    songtitle.style.color= '#ff1a9f';
    // Show player with transition
    player.style.display = 'flex';
    setTimeout(() => {
        player.style.opacity = '1';
        player.style.transform = 'scale(1)'; // Scale to normal size
    }, 10); 

    // Create or reset the audio player
    if (!audioPlayer) {
        audioPlayer = new Audio();
        audioPlayer.addEventListener('ended', () => {
            songId++; // Automatically go to the next song
            if (songId > 14) songId = 1; // Loop back to the first song
            showPlayer(songId); // Change song
        });
    }

    // Reset the audio player to the start (important for playing from the beginning)
    audioPlayer.pause();  // Pause the current audio if any
    audioPlayer.currentTime = 0; // Reset to the beginning

    // Set song details based on songId
    switch (songId) {
        case 1:
            audioPlayer.src = '/song1.mp3'; 
            songName.innerText = 'Te iubesc';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song1.jpg';
           
            break;
        case 2:
            audioPlayer.src = 'songs/song2.mp3'; 
            songName.innerText = 'Gâza mea';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song2.jpg';
           
            break;
        case 3:
            audioPlayer.src = 'songs/song3.mp3'; 
            songName.innerText = 'Denisa mea';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song3.jpg';
            
            break;
        case 4:
            audioPlayer.src = 'songs/song4.mp3'; 
            songName.innerText = 'Denisa din Damideni';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song4.jpg';
            
            break;
        case 5:
            audioPlayer.src = 'songs/song5.mp3'; 
            songName.innerText = 'Ne potrivim';
            songArtist.innerText = 'Noi';
            songImage.src = 'assets/song5.jpg';
           
            break;
        case 6:
            audioPlayer.src = 'songs/song6.mp3'; 
            songName.innerText = 'Bucuria mea';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song6.jpg';
         
            break;
        case 7:
            audioPlayer.src = 'songs/song7.mp3'; 
            songName.innerText = 'My love, my heart';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song7.jpg';
           
            break;
        case 8:
            audioPlayer.src = 'songs/song8.mp3'; 
            songName.innerText = 'Doar pentru tine';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song8.jpg';
           
            break;
        case 9:
            audioPlayer.src = 'songs/song9.mp3'; 
            songName.innerText = 'Denisa&Florin';
            songArtist.innerText = 'Noi';
            songImage.src = 'assets/song9.jpg';
           
            break;
        case 10:
            audioPlayer.src = 'songs/song10.mp3'; 
            songName.innerText = 'I think about YOU';
            songArtist.innerText = 'Noi';
            songImage.src = 'assets/song10.jpg';
           
            break;
        case 11:
            audioPlayer.src = 'songs/song11.mp3'; 
            songName.innerText = 'Ne-am îndrăgostit';
            songArtist.innerText = 'Noi';
            songImage.src = 'assets/song11.jpg';
           
            break;
        case 12:
            audioPlayer.src = 'songs/song12.mp3'; 
            songName.innerText = 'Cum ne-am cunoscut';
            songArtist.innerText = 'Noi';
            songImage.src = 'assets/song12.jpg';
           
            break;
        case 13:
            audioPlayer.src = 'songs/song13.mp3'; 
            songName.innerText = 'Mă faci să urlu';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song13.jpg';
           
            break;
        case 14:
            audioPlayer.src = 'songs/song14.mp3'; 
            songName.innerText = 'Bebelușa';
            songArtist.innerText = 'De la Florin';
            songImage.src = 'assets/song14.jpg';
           
            break;
        default:
            console.log('Song not found');
            break;
    }

    // Play the audio once the source is set
    audioPlayer.play();  // Start playing the song
    isPlaying = true;
    document.querySelector('.pause').querySelector('img').src = 'assets/pause.png'; // Set pause button to show
    getAudioCurrentTime();
}

function togglePlayPause() {
}
function getAudioCurrentTime() {
}


  document.addEventListener("keydown", function(event) {
    if (event.key === "d") {
        getAudioCurrentTime();
    }
  });
  setInterval(getAudioCurrentTime, 1000); // Updates every second

  function addTenSeconds() {
    const skipTime = 10; // Time in seconds to advance
    if (audioPlayer && !audioPlayer.paused) {
        audioPlayer.currentTime += skipTime; // Increase current time by 10 seconds
        getAudioCurrentTime();
    }
}

function substractTenSeconds() {
  const skipTime = 10; // Time in seconds to advance
  if (audioPlayer && !audioPlayer.paused) {
      audioPlayer.currentTime -= skipTime; // Increase current time by 10 seconds
      getAudioCurrentTime();
  }
}

function playNext(){
  if (!audioPlayer) {
    audioPlayer = new Audio();
    audioPlayer.addEventListener('ended', () => {
        songId++; // Automatically go to the next song
        if (songId > 14) songId = 1; // Loop back to the first song
        showPlayer(songId); // Change song
        
    });
}
}

function downloadCurrentAudio() {
  const songName = document.querySelector('.play-title').innerText; // Get the title from the div
  const audioSrc = audioPlayer.src; // Get the source of the current audio player

  if (audioSrc) {
      // Create a temporary anchor element to trigger the download
      const link = document.createElement('a');
      link.href = audioSrc;  // Set the download link to the current audio source
      link.download = `${songName}.mp3`;  // Set the download filename to the song name with .mp3 extension
      
      // Append the link to the document and trigger a click
      document.body.appendChild(link);
      link.click();

      // Remove the temporary link from the document
      document.body.removeChild(link);
      
      console.log('Downloading: ' + songName);
  } else {
      console.log('No audio is playing');
  }
}
</script>
</body>
</html>


